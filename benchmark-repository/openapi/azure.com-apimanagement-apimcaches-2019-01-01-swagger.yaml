openapi: 3.0.0
info:
  description: Use these REST APIs for performing operations on Cache entity in your Azure
    API Management deployment. Azure API Management also allows for caching
    responses in an external Azure Cache for Redis. For more information refer
    to [External Redis Cache in
    ApiManagement](https://docs.microsoft.com/en-us/azure/api-management/api-management-howto-cache-external).
  title: ApiManagementClient
  version: 2019-01-01
  x-apisguru-categories:
    - cloud
  x-logo:
    url: https://assets.onestore.ms/cdnfiles/onestorerolling-1606-01000/shell/v3/images/logo/microsoft.png
  x-origin:
    - format: swagger
      url: https://raw.githubusercontent.com/Azure/azure-rest-api-specs/master/specification/apimanagement/resource-manager/Microsoft.ApiManagement/stable/2019-01-01/apimcaches.json
      version: "2.0"
  x-preferred: true
  x-providerName: azure.com
  x-serviceName: apimanagement-apimcaches
  x-tags:
    - Azure
    - Microsoft
security:
  - azure_auth:
      - user_impersonation
paths:
  "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ApiManagement/service/{serviceName}/caches":
    get:
      description: Lists a collection of all external Caches in the specified service
        instance.
      operationId: Cache_ListByService
      parameters:
        - description: The name of the resource group.
          in: path
          name: resourceGroupName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            ApiManagementListCaches:
              value: rg1
        - description: The name of the API Management service.
          in: path
          name: serviceName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
            minLength: 1
            maxLength: 50
            pattern: ^[a-zA-Z](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$
          examples:
            ApiManagementListCaches:
              value: apimService1
        - description: Number of records to return.
          in: query
          name: $top
          required: false
          x-ms-parameter-location: method
          schema:
            type: integer
            format: int32
            minimum: 1
        - description: Number of records to skip.
          in: query
          name: $skip
          required: false
          x-ms-parameter-location: method
          schema:
            type: integer
            format: int32
            minimum: 0
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          schema:
            type: string
          examples:
            ApiManagementListCaches:
              value: 2019-01-01
        - description: Subscription credentials which uniquely identify Microsoft Azure
            subscription. The subscription ID forms part of the URI for every
            service call.
          in: path
          name: subscriptionId
          required: true
          schema:
            type: string
          examples:
            ApiManagementListCaches:
              value: subid
      responses:
        "200":
          description: Returns a collection of Cache entity.
          content:
            application/json:
              schema:
                description: Paged Caches list representation.
                properties:
                  nextLink:
                    description: Next page link if any.
                    type: string
                  value:
                    description: Page values.
                    items:
                      allOf:
                        - description: The Resource definition.
                          properties:
                            id:
                              description: Resource ID.
                              readOnly: true
                              type: string
                            name:
                              description: Resource name.
                              readOnly: true
                              type: string
                            type:
                              description: Resource type for API Management resource.
                              readOnly: true
                              type: string
                          x-ms-azure-resource: true
                      description: Cache details.
                      properties:
                        properties:
                          description: Properties of the Cache contract.
                          properties:
                            connectionString:
                              description: Runtime connection string to cache
                              maxLength: 300
                              type: string
                            description:
                              description: Cache description
                              maxLength: 2000
                              type: string
                            resourceId:
                              description: Original uri of entity in external system cache
                                points to
                              maxLength: 2000
                              type: string
                          required:
                            - connectionString
                    type: array
              examples:
                ApiManagementListCaches:
                  $ref: "#/components/examples/ApiManagementListCaches"
        default:
          description: Error response describing why the operation failed.
          content:
            application/json:
              schema:
                description: Error Response.
                properties:
                  error:
                    description: Error Body contract.
                    properties:
                      code:
                        description: Service-defined error code. This code serves as a
                          sub-status for the HTTP error code specified in the
                          response.
                        type: string
                      details:
                        description: The list of invalid fields send in request, in case of
                          validation error.
                        items:
                          description: Error Field contract.
                          properties:
                            code:
                              description: Property level error code.
                              type: string
                            message:
                              description: Human-readable representation of property-level
                                error.
                              type: string
                            target:
                              description: Property name.
                              type: string
                        type: array
                      message:
                        description: Human-readable representation of the error.
                        type: string
      tags:
        - Cache
      x-ms-pageable:
        nextLinkName: nextLink
  "/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/Microsoft.ApiManagement/service/{serviceName}/caches/{cacheId}":
    delete:
      description: Deletes specific Cache.
      operationId: Cache_Delete
      parameters:
        - description: The name of the resource group.
          in: path
          name: resourceGroupName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            ApiManagementDeleteCache:
              value: rg1
        - description: The name of the API Management service.
          in: path
          name: serviceName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
            minLength: 1
            maxLength: 50
            pattern: ^[a-zA-Z](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$
          examples:
            ApiManagementDeleteCache:
              value: apimService1
        - description: Identifier of the Cache entity. Cache identifier (should be either
            'default' or valid Azure region identifier).
          in: path
          name: cacheId
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
            minLength: 1
            maxLength: 80
            pattern: ^[^*#&+:<>?]+$
          examples:
            ApiManagementDeleteCache:
              value: southindia
        - description: ETag of the Entity. ETag should match the current entity state from
            the header response of the GET request or it should be * for
            unconditional update.
          in: header
          name: If-Match
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            ApiManagementDeleteCache:
              value: "*"
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          schema:
            type: string
          examples:
            ApiManagementDeleteCache:
              value: 2019-01-01
        - description: Subscription credentials which uniquely identify Microsoft Azure
            subscription. The subscription ID forms part of the URI for every
            service call.
          in: path
          name: subscriptionId
          required: true
          schema:
            type: string
          examples:
            ApiManagementDeleteCache:
              value: subid
      responses:
        "200":
          description: The Cache was successfully deleted.
        "204":
          description: The Cache was successfully deleted.
        default:
          description: Error response describing why the operation failed.
          content:
            application/json:
              schema:
                description: Error Response.
                properties:
                  error:
                    description: Error Body contract.
                    properties:
                      code:
                        description: Service-defined error code. This code serves as a
                          sub-status for the HTTP error code specified in the
                          response.
                        type: string
                      details:
                        description: The list of invalid fields send in request, in case of
                          validation error.
                        items:
                          description: Error Field contract.
                          properties:
                            code:
                              description: Property level error code.
                              type: string
                            message:
                              description: Human-readable representation of property-level
                                error.
                              type: string
                            target:
                              description: Property name.
                              type: string
                        type: array
                      message:
                        description: Human-readable representation of the error.
                        type: string
      tags:
        - Cache
    get:
      description: Gets the details of the Cache specified by its identifier.
      operationId: Cache_Get
      parameters:
        - description: The name of the resource group.
          in: path
          name: resourceGroupName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            ApiManagementGetCache:
              value: rg1
        - description: The name of the API Management service.
          in: path
          name: serviceName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
            minLength: 1
            maxLength: 50
            pattern: ^[a-zA-Z](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$
          examples:
            ApiManagementGetCache:
              value: apimService1
        - description: Identifier of the Cache entity. Cache identifier (should be either
            'default' or valid Azure region identifier).
          in: path
          name: cacheId
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
            minLength: 1
            maxLength: 80
            pattern: ^[^*#&+:<>?]+$
          examples:
            ApiManagementGetCache:
              value: westindia
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          schema:
            type: string
          examples:
            ApiManagementGetCache:
              value: 2019-01-01
        - description: Subscription credentials which uniquely identify Microsoft Azure
            subscription. The subscription ID forms part of the URI for every
            service call.
          in: path
          name: subscriptionId
          required: true
          schema:
            type: string
          examples:
            ApiManagementGetCache:
              value: subid
      responses:
        "200":
          description: The response body contains the specified Cache entity.
          headers:
            ETag:
              description: Current entity state version. Should be treated as opaque and
                used to make conditional HTTP requests.
              schema:
                type: string
          content:
            application/json:
              schema:
                allOf:
                  - description: The Resource definition.
                    properties:
                      id:
                        description: Resource ID.
                        readOnly: true
                        type: string
                      name:
                        description: Resource name.
                        readOnly: true
                        type: string
                      type:
                        description: Resource type for API Management resource.
                        readOnly: true
                        type: string
                    x-ms-azure-resource: true
                description: Cache details.
                properties:
                  properties:
                    description: Properties of the Cache contract.
                    properties:
                      connectionString:
                        description: Runtime connection string to cache
                        maxLength: 300
                        type: string
                      description:
                        description: Cache description
                        maxLength: 2000
                        type: string
                      resourceId:
                        description: Original uri of entity in external system cache points
                          to
                        maxLength: 2000
                        type: string
                    required:
                      - connectionString
              examples:
                ApiManagementGetCache:
                  $ref: "#/components/examples/ApiManagementGetCache"
        default:
          description: Error response describing why the operation failed.
          content:
            application/json:
              schema:
                description: Error Response.
                properties:
                  error:
                    description: Error Body contract.
                    properties:
                      code:
                        description: Service-defined error code. This code serves as a
                          sub-status for the HTTP error code specified in the
                          response.
                        type: string
                      details:
                        description: The list of invalid fields send in request, in case of
                          validation error.
                        items:
                          description: Error Field contract.
                          properties:
                            code:
                              description: Property level error code.
                              type: string
                            message:
                              description: Human-readable representation of property-level
                                error.
                              type: string
                            target:
                              description: Property name.
                              type: string
                        type: array
                      message:
                        description: Human-readable representation of the error.
                        type: string
      tags:
        - Cache
    head:
      description: Gets the entity state (Etag) version of the Cache specified by its
        identifier.
      operationId: Cache_GetEntityTag
      parameters:
        - description: The name of the resource group.
          in: path
          name: resourceGroupName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            ApiManagementHeadCache:
              value: rg1
        - description: The name of the API Management service.
          in: path
          name: serviceName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
            minLength: 1
            maxLength: 50
            pattern: ^[a-zA-Z](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$
          examples:
            ApiManagementHeadCache:
              value: apimService1
        - description: Identifier of the Cache entity. Cache identifier (should be either
            'default' or valid Azure region identifier).
          in: path
          name: cacheId
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
            minLength: 1
            maxLength: 80
            pattern: ^[^*#&+:<>?]+$
          examples:
            ApiManagementHeadCache:
              value: default
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          schema:
            type: string
          examples:
            ApiManagementHeadCache:
              value: 2019-01-01
        - description: Subscription credentials which uniquely identify Microsoft Azure
            subscription. The subscription ID forms part of the URI for every
            service call.
          in: path
          name: subscriptionId
          required: true
          schema:
            type: string
          examples:
            ApiManagementHeadCache:
              value: subid
      responses:
        "200":
          description: Specified Cache entity exists and current entity state version is
            present in the ETag header.
          headers:
            ETag:
              description: Current entity state version. Should be treated as opaque and
                used to make conditional HTTP requests.
              schema:
                type: string
        default:
          description: Error response describing why the operation failed.
          content:
            application/json:
              schema:
                description: Error Response.
                properties:
                  error:
                    description: Error Body contract.
                    properties:
                      code:
                        description: Service-defined error code. This code serves as a
                          sub-status for the HTTP error code specified in the
                          response.
                        type: string
                      details:
                        description: The list of invalid fields send in request, in case of
                          validation error.
                        items:
                          description: Error Field contract.
                          properties:
                            code:
                              description: Property level error code.
                              type: string
                            message:
                              description: Human-readable representation of property-level
                                error.
                              type: string
                            target:
                              description: Property name.
                              type: string
                        type: array
                      message:
                        description: Human-readable representation of the error.
                        type: string
      tags:
        - Cache
    patch:
      description: Updates the details of the cache specified by its identifier.
      operationId: Cache_Update
      parameters:
        - description: The name of the resource group.
          in: path
          name: resourceGroupName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            ApiManagementUpdateCache:
              value: rg1
        - description: The name of the API Management service.
          in: path
          name: serviceName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
            minLength: 1
            maxLength: 50
            pattern: ^[a-zA-Z](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$
          examples:
            ApiManagementUpdateCache:
              value: apimService1
        - description: Identifier of the Cache entity. Cache identifier (should be either
            'default' or valid Azure region identifier).
          in: path
          name: cacheId
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
            minLength: 1
            maxLength: 80
            pattern: ^[^*#&+:<>?]+$
          examples:
            ApiManagementUpdateCache:
              value: westindia
        - description: ETag of the Entity. ETag should match the current entity state from
            the header response of the GET request or it should be * for
            unconditional update.
          in: header
          name: If-Match
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            ApiManagementUpdateCache:
              value: "*"
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          schema:
            type: string
          examples:
            ApiManagementUpdateCache:
              value: 2019-01-01
        - description: Subscription credentials which uniquely identify Microsoft Azure
            subscription. The subscription ID forms part of the URI for every
            service call.
          in: path
          name: subscriptionId
          required: true
          schema:
            type: string
          examples:
            ApiManagementUpdateCache:
              value: subid
      requestBody:
        content:
          application/json:
            schema:
              description: Cache update details.
              properties:
                properties:
                  description: Parameters supplied to the Update Cache operation.
                  properties:
                    connectionString:
                      description: Runtime connection string to cache
                      maxLength: 300
                      type: string
                    description:
                      description: Cache description
                      maxLength: 2000
                      type: string
                    resourceId:
                      description: Original uri of entity in external system cache points to
                      maxLength: 2000
                      type: string
        description: Update parameters.
        required: true
      responses:
        "204":
          description: The cache details were successfully updated.
        default:
          description: Error response describing why the operation failed.
          content:
            application/json:
              schema:
                description: Error Response.
                properties:
                  error:
                    description: Error Body contract.
                    properties:
                      code:
                        description: Service-defined error code. This code serves as a
                          sub-status for the HTTP error code specified in the
                          response.
                        type: string
                      details:
                        description: The list of invalid fields send in request, in case of
                          validation error.
                        items:
                          description: Error Field contract.
                          properties:
                            code:
                              description: Property level error code.
                              type: string
                            message:
                              description: Human-readable representation of property-level
                                error.
                              type: string
                            target:
                              description: Property name.
                              type: string
                        type: array
                      message:
                        description: Human-readable representation of the error.
                        type: string
      tags:
        - Cache
    put:
      description: Creates or updates an External Cache to be used in Api Management
        instance.
      externalDocs:
        description: Use an external cache in Azure API Management
        url: https://docs.microsoft.com/en-us/azure/api-management/api-management-howto-cache-external
      operationId: Cache_CreateOrUpdate
      parameters:
        - description: The name of the resource group.
          in: path
          name: resourceGroupName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            ApiManagementCreateCache:
              value: rg1
        - description: The name of the API Management service.
          in: path
          name: serviceName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
            minLength: 1
            maxLength: 50
            pattern: ^[a-zA-Z](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$
          examples:
            ApiManagementCreateCache:
              value: apimService1
        - description: Identifier of the Cache entity. Cache identifier (should be either
            'default' or valid Azure region identifier).
          in: path
          name: cacheId
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
            minLength: 1
            maxLength: 80
            pattern: ^[^*#&+:<>?]+$
          examples:
            ApiManagementCreateCache:
              value: westindia
        - description: ETag of the Entity. Not required when creating an entity, but
            required when updating an entity.
          in: header
          name: If-Match
          required: false
          x-ms-parameter-location: method
          schema:
            type: string
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          schema:
            type: string
          examples:
            ApiManagementCreateCache:
              value: 2019-01-01
        - description: Subscription credentials which uniquely identify Microsoft Azure
            subscription. The subscription ID forms part of the URI for every
            service call.
          in: path
          name: subscriptionId
          required: true
          schema:
            type: string
          examples:
            ApiManagementCreateCache:
              value: subid
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - description: The Resource definition.
                  properties:
                    id:
                      description: Resource ID.
                      readOnly: true
                      type: string
                    name:
                      description: Resource name.
                      readOnly: true
                      type: string
                    type:
                      description: Resource type for API Management resource.
                      readOnly: true
                      type: string
                  x-ms-azure-resource: true
              description: Cache details.
              properties:
                properties:
                  description: Properties of the Cache contract.
                  properties:
                    connectionString:
                      description: Runtime connection string to cache
                      maxLength: 300
                      type: string
                    description:
                      description: Cache description
                      maxLength: 2000
                      type: string
                    resourceId:
                      description: Original uri of entity in external system cache points to
                      maxLength: 2000
                      type: string
                  required:
                    - connectionString
        description: Create or Update parameters.
        required: true
      responses:
        "200":
          description: The Cache details were successfully updated.
          headers:
            ETag:
              description: Current entity state version. Should be treated as opaque and
                used to make conditional HTTP requests.
              schema:
                type: string
          content:
            application/json:
              schema:
                allOf:
                  - description: The Resource definition.
                    properties:
                      id:
                        description: Resource ID.
                        readOnly: true
                        type: string
                      name:
                        description: Resource name.
                        readOnly: true
                        type: string
                      type:
                        description: Resource type for API Management resource.
                        readOnly: true
                        type: string
                    x-ms-azure-resource: true
                description: Cache details.
                properties:
                  properties:
                    description: Properties of the Cache contract.
                    properties:
                      connectionString:
                        description: Runtime connection string to cache
                        maxLength: 300
                        type: string
                      description:
                        description: Cache description
                        maxLength: 2000
                        type: string
                      resourceId:
                        description: Original uri of entity in external system cache points
                          to
                        maxLength: 2000
                        type: string
                    required:
                      - connectionString
              examples:
                ApiManagementCreateCache:
                  $ref: "#/components/examples/ApiManagementCreateCache"
        "201":
          description: The new Cache was successfully added.
          headers:
            ETag:
              description: Current entity state version. Should be treated as opaque and
                used to make conditional HTTP requests.
              schema:
                type: string
          content:
            application/json:
              schema:
                allOf:
                  - description: The Resource definition.
                    properties:
                      id:
                        description: Resource ID.
                        readOnly: true
                        type: string
                      name:
                        description: Resource name.
                        readOnly: true
                        type: string
                      type:
                        description: Resource type for API Management resource.
                        readOnly: true
                        type: string
                    x-ms-azure-resource: true
                description: Cache details.
                properties:
                  properties:
                    description: Properties of the Cache contract.
                    properties:
                      connectionString:
                        description: Runtime connection string to cache
                        maxLength: 300
                        type: string
                      description:
                        description: Cache description
                        maxLength: 2000
                        type: string
                      resourceId:
                        description: Original uri of entity in external system cache points
                          to
                        maxLength: 2000
                        type: string
                    required:
                      - connectionString
              examples:
                ApiManagementCreateCache:
                  $ref: "#/components/examples/ApiManagementCreateCache"
        default:
          description: Error response describing why the operation failed.
          content:
            application/json:
              schema:
                description: Error Response.
                properties:
                  error:
                    description: Error Body contract.
                    properties:
                      code:
                        description: Service-defined error code. This code serves as a
                          sub-status for the HTTP error code specified in the
                          response.
                        type: string
                      details:
                        description: The list of invalid fields send in request, in case of
                          validation error.
                        items:
                          description: Error Field contract.
                          properties:
                            code:
                              description: Property level error code.
                              type: string
                            message:
                              description: Human-readable representation of property-level
                                error.
                              type: string
                            target:
                              description: Property name.
                              type: string
                        type: array
                      message:
                        description: Human-readable representation of the error.
                        type: string
      tags:
        - Cache
servers:
  - url: https://management.azure.com
components:
  examples:
    ApiManagementListCaches:
      value:
        value:
          - id: /subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/caches/westindia
            name: westindia
            properties:
              connectionString: "{{5c68d535a40f7e61103cd285}}}"
              description: Redis cache instances in West India
              resourceId: /subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Cache/Redis/contoso5
            type: Microsoft.ApiManagement/service/caches
    ApiManagementGetCache:
      value:
        id: /subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/caches/westindia
        name: westindia
        properties:
          connectionString: "{{5c68d535a40f7e61103cd285}}}"
          description: Redis cache instances in West India
          resourceId: /subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Cache/Redis/contoso5
        type: Microsoft.ApiManagement/service/caches
    ApiManagementCreateCache:
      value:
        id: /subscriptions/subid/resourceGroups/rg1/providers/Microsoft.ApiManagement/service/apimService1/caches/westindia
        name: westindia
        properties:
          connectionString: "{{5c68d535a40f7e61103cd285}}}"
          description: Redis cache instances in West India
          resourceId: /subscriptions/subid/resourceGroups/rg1/providers/Microsoft.Cache/Redis/contoso5
        type: Microsoft.ApiManagement/service/caches
  securitySchemes:
    azure_auth:
      description: Azure Active Directory OAuth2 Flow.
      type: oauth2
      flows:
        implicit:
          authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
          scopes:
            user_impersonation: impersonate your user account
