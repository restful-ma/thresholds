openapi: 3.0.0
info:
  description: Azure Blueprint Client.
  title: BlueprintClient
  version: 2017-11-11-preview
  x-apisguru-categories:
    - cloud
  x-logo:
    url: https://assets.onestore.ms/cdnfiles/onestorerolling-1606-01000/shell/v3/images/logo/microsoft.png
  x-origin:
    - format: swagger
      url: https://raw.githubusercontent.com/Azure/azure-rest-api-specs/master/specification/blueprint/resource-manager/Microsoft.Blueprint/preview/2017-11-11-preview/blueprintDefinition.json
      version: "2.0"
  x-preferred: false
  x-providerName: azure.com
  x-serviceName: blueprint-blueprintDefinition
  x-tags:
    - Azure
    - Microsoft
security:
  - azure_auth:
      - user_impersonation
paths:
  /providers/Microsoft.Blueprint/operations:
    get:
      description: List all of the available operations the Blueprint resource provider
        supports.
      operationId: Operations_List
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
      responses:
        "200":
          description: OK response definition.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourceProviderOperationList"
              examples:
                OperationsList:
                  $ref: "#/components/examples/OperationsList"
      tags:
        - Operations
  "/providers/Microsoft.Management/managementGroups/{managementGroupName}/providers/Microsoft.Blueprint/blueprints":
    get:
      description: List Blueprint definitions within a Management Group.
      operationId: Blueprints_List
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
      responses:
        "200":
          description: OK -- retrieved Blueprints in this ManagementGroup.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BlueprintList"
              examples:
                Blueprint:
                  $ref: "#/components/examples/Blueprint"
      tags:
        - Blueprint
      x-ms-pageable:
        nextLinkName: nextLink
  "/providers/Microsoft.Management/managementGroups/{managementGroupName}/providers/Microsoft.Blueprint/blueprints/{blueprintName}":
    delete:
      description: Delete a blueprint definition.
      operationId: Blueprints_Delete
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
        - $ref: "#/components/parameters/BlueprintNameParameter"
      responses:
        "200":
          description: OK -- blueprint definition deleted
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Blueprint"
              examples:
                Blueprint_Delete:
                  $ref: "#/components/examples/Blueprint_Delete"
        "204":
          description: no content
      tags:
        - Blueprint
    get:
      description: Get a blueprint definition.
      operationId: Blueprints_Get
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
        - $ref: "#/components/parameters/BlueprintNameParameter"
      responses:
        "200":
          description: OK -- blueprint definition retrieved.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Blueprint"
              examples:
                Blueprint:
                  $ref: "#/components/examples/Blueprint"
      tags:
        - Blueprint
    put:
      description: Create or update Blueprint definition.
      operationId: Blueprints_CreateOrUpdate
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
        - $ref: "#/components/parameters/BlueprintNameParameter"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Blueprint"
        description: Blueprint definition.
        required: true
      responses:
        "201":
          description: Created -- Blueprint definition saved.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Blueprint"
              examples:
                Blueprint:
                  $ref: "#/components/examples/Blueprint"
      tags:
        - Blueprint
  "/providers/Microsoft.Management/managementGroups/{managementGroupName}/providers/Microsoft.Blueprint/blueprints/{blueprintName}/artifacts":
    get:
      description: List artifacts for a given Blueprint.
      operationId: Artifacts_List
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
        - $ref: "#/components/parameters/BlueprintNameParameter"
      responses:
        "200":
          description: OK -- Blueprint artifacts retrieved.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ArtifactList"
              examples:
                ArtifactList:
                  $ref: "#/components/examples/ArtifactList"
      tags:
        - Artifact
      x-ms-pageable:
        nextLinkName: nextLink
  "/providers/Microsoft.Management/managementGroups/{managementGroupName}/providers/Microsoft.Blueprint/blueprints/{blueprintName}/artifacts/{artifactName}":
    delete:
      description: Delete a Blueprint artifact.
      operationId: Artifacts_Delete
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
        - $ref: "#/components/parameters/BlueprintNameParameter"
        - $ref: "#/components/parameters/ArtifactNameParameter"
      responses:
        "200":
          description: OK -- Blueprint artifact deleted.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Artifact"
              examples:
                ARMTemplateArtifact_Delete:
                  $ref: "#/components/examples/ARMTemplateArtifact_Delete"
                PolicyAssignmentArtifact_Delete:
                  $ref: "#/components/examples/PolicyAssignmentArtifact_Delete"
                RoleAssignmentArtifact_Delete:
                  $ref: "#/components/examples/RoleAssignmentArtifact_Delete"
        "204":
          description: No Content
      tags:
        - Artifact
    get:
      description: Get a Blueprint artifact.
      operationId: Artifacts_Get
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
        - $ref: "#/components/parameters/BlueprintNameParameter"
        - $ref: "#/components/parameters/ArtifactNameParameter"
      responses:
        "200":
          description: OK -- Blueprint artifact retrieved.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Artifact"
              examples:
                ARMTemplateArtifact:
                  $ref: "#/components/examples/ARMTemplateArtifact"
                PolicyAssignmentArtifact:
                  $ref: "#/components/examples/PolicyAssignmentArtifact"
                RoleAssignmentArtifact:
                  $ref: "#/components/examples/RoleAssignmentArtifact"
      tags:
        - Artifact
    put:
      description: Create or update Blueprint artifact.
      operationId: Artifacts_CreateOrUpdate
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
        - $ref: "#/components/parameters/BlueprintNameParameter"
        - $ref: "#/components/parameters/ArtifactNameParameter"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Artifact"
        description: Blueprint artifact to save.
        required: true
      responses:
        "201":
          description: Created -- Blueprint artifact created/updated.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Artifact"
              examples:
                ARMTemplateArtifact:
                  $ref: "#/components/examples/ARMTemplateArtifact"
                PolicyAssignmentArtifact:
                  $ref: "#/components/examples/PolicyAssignmentArtifact"
                RoleAssignmentArtifact:
                  $ref: "#/components/examples/RoleAssignmentArtifact"
      tags:
        - Artifact
  "/providers/Microsoft.Management/managementGroups/{managementGroupName}/providers/Microsoft.Blueprint/blueprints/{blueprintName}/versions":
    get:
      description: List published versions of given Blueprint.
      operationId: PublishedBlueprints_List
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
        - $ref: "#/components/parameters/BlueprintNameParameter"
      responses:
        "200":
          description: OK -- all published Blueprint retrieved.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PublishedBlueprintList"
              examples:
                PublishedBlueprintList:
                  $ref: "#/components/examples/PublishedBlueprintList"
      tags:
        - PublishedBlueprint
      x-ms-pageable:
        nextLinkName: nextLink
  "/providers/Microsoft.Management/managementGroups/{managementGroupName}/providers/Microsoft.Blueprint/blueprints/{blueprintName}/versions/{versionId}":
    delete:
      description: Delete a published Blueprint.
      operationId: PublishedBlueprints_Delete
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
        - $ref: "#/components/parameters/BlueprintNameParameter"
        - $ref: "#/components/parameters/PublishedBlueprintVersionIdParameter"
      responses:
        "200":
          description: OK -- published Blueprint deleted.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PublishedBlueprint"
              examples:
                PublishedBlueprint_Delete:
                  $ref: "#/components/examples/PublishedBlueprint_Delete"
        "204":
          description: No Content
      tags:
        - PublishedBlueprint
    get:
      description: Get a published Blueprint.
      operationId: PublishedBlueprints_Get
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
        - $ref: "#/components/parameters/BlueprintNameParameter"
        - $ref: "#/components/parameters/PublishedBlueprintVersionIdParameter"
      responses:
        "200":
          description: OK -- published Blueprint retrieved.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PublishedBlueprint"
              examples:
                PublishedBlueprint_Get:
                  $ref: "#/components/examples/PublishedBlueprint_Get"
      tags:
        - PublishedBlueprint
    put:
      description: Publish a new version of the Blueprint with the latest artifacts.
        Published Blueprints are immutable.
      operationId: PublishedBlueprints_Create
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
        - $ref: "#/components/parameters/BlueprintNameParameter"
        - $ref: "#/components/parameters/PublishedBlueprintVersionIdParameter"
      responses:
        "201":
          description: Created -- published Blueprint.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PublishedBlueprint"
              examples:
                PublishedBlueprint_Publish:
                  $ref: "#/components/examples/PublishedBlueprint_Publish"
      tags:
        - PublishedBlueprint
  "/providers/Microsoft.Management/managementGroups/{managementGroupName}/providers/Microsoft.Blueprint/blueprints/{blueprintName}/versions/{versionId}/artifacts":
    get:
      description: List artifacts for a published Blueprint.
      operationId: PublishedArtifacts_List
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
        - $ref: "#/components/parameters/BlueprintNameParameter"
        - $ref: "#/components/parameters/PublishedBlueprintVersionIdParameter"
      responses:
        "200":
          description: OK -- all published artifact retrieved.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ArtifactList"
              examples:
                ArtifactList:
                  $ref: "#/components/examples/ArtifactList"
      tags:
        - PublishedArtifact
      x-ms-pageable:
        nextLinkName: nextLink
  "/providers/Microsoft.Management/managementGroups/{managementGroupName}/providers/Microsoft.Blueprint/blueprints/{blueprintName}/versions/{versionId}/artifacts/{artifactName}":
    get:
      description: Get an artifact for a published Blueprint.
      operationId: PublishedArtifacts_Get
      parameters:
        - $ref: "#/components/parameters/ApiVersionParameter"
        - $ref: "#/components/parameters/ManagementGroupNameParameter"
        - $ref: "#/components/parameters/BlueprintNameParameter"
        - $ref: "#/components/parameters/PublishedBlueprintVersionIdParameter"
        - $ref: "#/components/parameters/ArtifactNameParameter"
      responses:
        "200":
          description: OK -- published artifact retrieved.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Artifact"
              examples:
                ARMTemplateArtifact:
                  $ref: "#/components/examples/ARMTemplateArtifact"
                PolicyAssignmentArtifact:
                  $ref: "#/components/examples/PolicyAssignmentArtifact"
                RoleAssignmentArtifact:
                  $ref: "#/components/examples/RoleAssignmentArtifact"
      tags:
        - PublishedArtifact
servers:
  - url: https://management.azure.com
components:
  examples:
    OperationsList:
      value:
        value:
          - display:
              description: Read any Blueprints
              operation: Read Blueprints
              provider: Microsoft Blueprint
              resource: Blueprint
            name: Microsoft.Blueprint/blueprints/read
    Blueprint:
      value:
        id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint
        name: simpleBlueprint
        properties:
          description: blueprint contains all artifact kinds {'template', 'rbac', 'policy'}
          parameters:
            costCenter:
              metadata:
                displayName: force cost center tag for all resources under given
                  subscription.
              type: string
            owners:
              metadata:
                displayName: assign owners to subscription along with blueprint assignment.
              type: array
            storageAccountType:
              metadata:
                displayName: storage account type.
              type: string
          resourceGroups:
            storageRG:
              metadata:
                description: Contains storageAccounts that collect all shoebox logs.
                displayName: storage resource group
          targetScope: subscription
        type: Microsoft.Blueprint/blueprints
    Blueprint_Delete:
      value:
        id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint
        name: simpleBlueprint
        properties:
          description: blueprint contains all artifact kinds {'template', 'rbac', 'policy'}
          parameters:
            costCenter:
              metadata:
                displayName: force cost center tag for all resources under given
                  subscription.
              type: string
            owners:
              metadata:
                displayName: assign owners to subscription along with blueprint assignment.
              type: array
            storageAccountType:
              metadata:
                displayName: storage account type.
              type: string
          resourceGroups:
            storageRG:
              metadata:
                description: Contains storageAccounts that collect all shoebox logs.
                displayName: storage resource group
          targetScope: subscription
        type: Microsoft.Blueprint/blueprints
    ArtifactList:
      value:
        value:
          - id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint/versions/V2/artifacts/ownerAssignment
            kind: roleAssignment
            name: ownerAssignment
            properties:
              displayName: enforce owners of given subscription
              principalIds: "[parameters('owners')]"
              roleDefinitionId: /providers/Microsoft.Authorization/roleDefinitions/acdd72a7-3385-48ef-bd42-f606fba81ae7
            type: Microsoft.Blueprint/blueprints/versions/artifacts
          - id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint/versions/V2/artifacts/costCenterPolicy
            kind: policyAssignment
            name: costCenterPolicy
            properties:
              displayName: force costCenter tag on all resources
              parameters:
                tagName:
                  value: costCenter
                tagValue:
                  value: "[parameter('costCenter')]"
              policyDefinitionId: /providers/Microsoft.Authorization/policyDefinitions/1e30110a-5ceb-460c-a204-c1c3969c6d62
            type: Microsoft.Blueprint/blueprints/versions/artifacts
          - id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint/versions/V2/artifacts/storageTemplate
            kind: template
            name: storageTemplate
            properties:
              parameters:
                storageAccountType:
                  value: "[parameters('storageAccountType')]"
              resourceGroup: storageRG
              template:
                contentVersion: 1.0.0.0
                outputs:
                  storageAccountName:
                    type: string
                    value: "[variables('storageAccountName')]"
                parameters:
                  storageAccountType:
                    allowedValues:
                      - Standard_LRS
                      - Standard_GRS
                      - Standard_ZRS
                      - Premium_LRS
                    defaultValue: Standard_LRS
                    metadata:
                      description: Storage Account type
                    type: string
                resources:
                  - apiVersion: 2016-01-01
                    kind: Storage
                    location: "[resourceGroup().location]"
                    name: "[variables('storageAccountName')]"
                    properties: {}
                    sku:
                      name: "[parameters('storageAccountType')]"
                    type: Microsoft.Storage/storageAccounts
                variables:
                  storageAccountName: "[concat(uniquestring(resourceGroup().id), 'standardsa')]"
            type: Microsoft.Blueprint/blueprints/versions/artifacts
    ARMTemplateArtifact_Delete:
      value:
        id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint/artifacts/storageTemplate
        kind: template
        name: storageTemplate
        properties:
          parameters:
            storageAccountType:
              value: "[parameters('storageAccountType')]"
          resourceGroup: storageRG
          template:
            contentVersion: 1.0.0.0
            outputs:
              storageAccountName:
                type: string
                value: "[variables('storageAccountName')]"
            parameters:
              storageAccountType:
                allowedValues:
                  - Standard_LRS
                  - Standard_GRS
                  - Standard_ZRS
                  - Premium_LRS
                defaultValue: Standard_LRS
                metadata:
                  description: Storage Account type
                type: string
            resources:
              - apiVersion: 2016-01-01
                kind: Storage
                location: "[resourceGroup().location]"
                name: "[variables('storageAccountName')]"
                properties: {}
                sku:
                  name: "[parameters('storageAccountType')]"
                type: Microsoft.Storage/storageAccounts
            variables:
              storageAccountName: "[concat(uniquestring(resourceGroup().id), 'standardsa')]"
        type: Microsoft.Blueprint/blueprints/artifacts
    PolicyAssignmentArtifact_Delete:
      value:
        id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint/artifacts/costCenterPolicy
        kind: policyAssignment
        name: costCenterPolicy
        properties:
          displayName: force costCenter tag on all resources
          parameters:
            tagName:
              value: costCenter
            tagValue:
              value: "[parameter('costCenter')]"
          policyDefinitionId: /providers/Microsoft.Authorization/policyDefinitions/1e30110a-5ceb-460c-a204-c1c3969c6d62
        type: Microsoft.Blueprint/blueprints/artifacts
    RoleAssignmentArtifact_Delete:
      value:
        id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint/artifacts/ownerAssignment
        kind: roleAssignment
        name: ownerAssignment
        properties:
          displayName: enforce owners of given subscription
          principalIds: "[parameters('owners')]"
          roleDefinitionId: /providers/Microsoft.Authorization/roleDefinitions/acdd72a7-3385-48ef-bd42-f606fba81ae7
        type: Microsoft.Blueprint/blueprints/artifacts
    ARMTemplateArtifact:
      value:
        id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint/versions/V2/artifacts/storageTemplate
        kind: template
        name: storageTemplate
        properties:
          parameters:
            storageAccountType:
              value: "[parameters('storageAccountType')]"
          resourceGroup: storageRG
          template:
            contentVersion: 1.0.0.0
            outputs:
              storageAccountName:
                type: string
                value: "[variables('storageAccountName')]"
            parameters:
              storageAccountType:
                allowedValues:
                  - Standard_LRS
                  - Standard_GRS
                  - Standard_ZRS
                  - Premium_LRS
                defaultValue: Standard_LRS
                metadata:
                  description: Storage Account type
                type: string
            resources:
              - apiVersion: 2016-01-01
                kind: Storage
                location: "[resourceGroup().location]"
                name: "[variables('storageAccountName')]"
                properties: {}
                sku:
                  name: "[parameters('storageAccountType')]"
                type: Microsoft.Storage/storageAccounts
            variables:
              storageAccountName: "[concat(uniquestring(resourceGroup().id), 'standardsa')]"
        type: Microsoft.Blueprint/blueprints/versions/artifacts
    PolicyAssignmentArtifact:
      value:
        id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint/versions/V2/artifacts/costCenterPolicy
        kind: policyAssignment
        name: costCenterPolicy
        properties:
          displayName: force costCenter tag on all resources
          parameters:
            tagName:
              value: costCenter
            tagValue:
              value: "[parameter('costCenter')]"
          policyDefinitionId: /providers/Microsoft.Authorization/policyDefinitions/1e30110a-5ceb-460c-a204-c1c3969c6d62
        type: Microsoft.Blueprint/blueprints/versions/artifacts
    RoleAssignmentArtifact:
      value:
        id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint/versions/V2/artifacts/ownerAssignment
        kind: roleAssignment
        name: ownerAssignment
        properties:
          displayName: enforce owners of given subscription
          principalIds: "[parameters('owners')]"
          roleDefinitionId: /providers/Microsoft.Authorization/roleDefinitions/acdd72a7-3385-48ef-bd42-f606fba81ae7
        type: Microsoft.Blueprint/blueprints/versions/artifacts
    PublishedBlueprintList:
      value:
        value:
          - id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint/versions/v1
            name: v1
            properties:
              blueprintName: simpleBlueprint
              description: blueprint contains all artifact kinds {'template', 'rbac',
                'policy'}
              parameters:
                costCenter:
                  metadata:
                    displayName: force cost center tag for all resources under given
                      subscription.
                  type: string
                owners:
                  metadata:
                    displayName: assign owners to subscription along with blueprint
                      assignment.
                  type: array
                storageAccountType:
                  metadata:
                    displayName: storage account type.
                  type: string
              resourceGroups:
                storageRG:
                  metadata:
                    description: Contains storageAccounts that collect all shoebox logs.
                    displayName: storage resource group
              targetScope: subscription
            type: Microsoft.Blueprint/blueprints/versions
    PublishedBlueprint_Delete:
      value:
        id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint
        name: v2
        properties:
          blueprintName: simpleBlueprint
          description: blueprint contains all artifact kinds {'template', 'rbac', 'policy'}
          parameters:
            costCenter:
              metadata:
                displayName: force cost center tag for all resources under given
                  subscription.
              type: string
            owners:
              metadata:
                displayName: assign owners to subscription along with blueprint assignment.
              type: array
            storageAccountType:
              metadata:
                displayName: storage account type.
              type: string
          resourceGroups:
            storageRG:
              metadata:
                description: Contains storageAccounts that collect all shoebox logs.
                displayName: storage resource group
          targetScope: subscription
        type: Microsoft.Blueprint/blueprints/versions
    PublishedBlueprint_Get:
      value:
        id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint
        name: v2
        properties:
          blueprintName: simpleBlueprint
          description: blueprint contains all artifact kinds {'template', 'rbac', 'policy'}
          parameters:
            costCenter:
              metadata:
                displayName: force cost center tag for all resources under given
                  subscription.
              type: string
            owners:
              metadata:
                displayName: assign owners to subscription along with blueprint assignment.
              type: array
            storageAccountType:
              metadata:
                displayName: storage account type.
              type: string
          resourceGroups:
            storageRG:
              metadata:
                description: Contains storageAccounts that collect all shoebox logs.
                displayName: storage resource group
          targetScope: subscription
        type: Microsoft.Blueprint/blueprints/versions
    PublishedBlueprint_Publish:
      value:
        id: /providers/Microsoft.Management/managementGroups/ContosoOnlineGroup/providers/Microsoft.Blueprint/blueprints/simpleBlueprint
        name: v2
        properties:
          blueprintName: simpleBlueprint
          description: blueprint contains all artifact kinds {'template', 'rbac', 'policy'}
          parameters:
            costCenter:
              metadata:
                displayName: force cost center tag for all resources under given
                  subscription.
              type: string
            owners:
              metadata:
                displayName: assign owners to subscription along with blueprint assignment.
              type: array
            storageAccountType:
              metadata:
                displayName: storage account type.
              type: string
          resourceGroups:
            storageRG:
              metadata:
                description: Contains storageAccounts that collect all shoebox logs.
                displayName: storage resource group
          targetScope: subscription
        type: Microsoft.Blueprint/blueprints/versions
  parameters:
    ApiVersionParameter:
      description: Client Api Version.
      in: query
      name: api-version
      required: true
      x-ms-parameter-location: client
      schema:
        type: string
      examples:
        OperationsList:
          value: 2017-11-11-preview
        Blueprint:
          value: 2017-11-11-preview
        Blueprint_Delete:
          value: 2017-11-11-preview
        ArtifactList:
          value: 2017-11-11-preview
        ARMTemplateArtifact_Delete:
          value: 2017-11-11-preview
        PolicyAssignmentArtifact_Delete:
          value: 2017-11-11-preview
        RoleAssignmentArtifact_Delete:
          value: 2017-11-11-preview
        ARMTemplateArtifact:
          value: 2017-11-11-preview
        PolicyAssignmentArtifact:
          value: 2017-11-11-preview
        RoleAssignmentArtifact:
          value: 2017-11-11-preview
        PublishedBlueprintList:
          value: 2017-11-11-preview
        PublishedBlueprint_Delete:
          value: 2017-11-11-preview
        PublishedBlueprint_Get:
          value: 2017-11-11-preview
        PublishedBlueprint_Publish:
          value: 2017-11-11-preview
    ArtifactNameParameter:
      description: name of the artifact.
      in: path
      name: artifactName
      required: true
      x-ms-parameter-location: method
      schema:
        type: string
      examples:
        ARMTemplateArtifact_Delete:
          value: storageTemplate
        PolicyAssignmentArtifact_Delete:
          value: costCenterPolicy
        RoleAssignmentArtifact_Delete:
          value: ownerAssignment
        ARMTemplateArtifact:
          value: storageTemplate
        PolicyAssignmentArtifact:
          value: costCenterPolicy
        RoleAssignmentArtifact:
          value: ownerAssignment
    BlueprintNameParameter:
      description: name of the blueprint.
      in: path
      name: blueprintName
      required: true
      x-ms-parameter-location: method
      schema:
        type: string
      examples:
        Blueprint_Delete:
          value: simpleBlueprint
        Blueprint:
          value: simpleBlueprint
        ArtifactList:
          value: simpleBlueprint
        ARMTemplateArtifact_Delete:
          value: simpleBlueprint
        PolicyAssignmentArtifact_Delete:
          value: simpleBlueprint
        RoleAssignmentArtifact_Delete:
          value: simpleBlueprint
        ARMTemplateArtifact:
          value: simpleBlueprint
        PolicyAssignmentArtifact:
          value: simpleBlueprint
        RoleAssignmentArtifact:
          value: simpleBlueprint
        PublishedBlueprintList:
          value: simpleBlueprint
        PublishedBlueprint_Delete:
          value: simpleBlueprint
        PublishedBlueprint_Get:
          value: simpleBlueprint
        PublishedBlueprint_Publish:
          value: simpleBlueprint
    ManagementGroupNameParameter:
      description: ManagementGroup where blueprint stores.
      in: path
      name: managementGroupName
      required: true
      x-ms-parameter-location: method
      schema:
        type: string
      examples:
        Blueprint:
          value: ContosoOnlineGroup
        Blueprint_Delete:
          value: ContosoOnlineGroup
        ArtifactList:
          value: ContosoOnlineGroup
        ARMTemplateArtifact_Delete:
          value: ContosoOnlineGroup
        PolicyAssignmentArtifact_Delete:
          value: ContosoOnlineGroup
        RoleAssignmentArtifact_Delete:
          value: ContosoOnlineGroup
        ARMTemplateArtifact:
          value: ContosoOnlineGroup
        PolicyAssignmentArtifact:
          value: ContosoOnlineGroup
        RoleAssignmentArtifact:
          value: ContosoOnlineGroup
        PublishedBlueprintList:
          value: ContosoOnlineGroup
        PublishedBlueprint_Delete:
          value: ContosoOnlineGroup
        PublishedBlueprint_Get:
          value: ContosoOnlineGroup
        PublishedBlueprint_Publish:
          value: ContosoOnlineGroup
    PublishedBlueprintVersionIdParameter:
      description: version of the published blueprint.
      in: path
      name: versionId
      required: true
      x-ms-parameter-location: method
      schema:
        type: string
      examples:
        PublishedBlueprint_Delete:
          value: v2
        PublishedBlueprint_Get:
          value: v2
        PublishedBlueprint_Publish:
          value: v2
        ArtifactList:
          value: V2
        ARMTemplateArtifact:
          value: V2
        PolicyAssignmentArtifact:
          value: V2
        RoleAssignmentArtifact:
          value: V2
    SubscriptionIdParameter:
      description: azure subscriptionId, which we assign the blueprint to.
      in: path
      name: subscriptionId
      required: true
      x-ms-parameter-location: method
      schema:
        type: string
  securitySchemes:
    azure_auth:
      description: Azure Active Directory OAuth2 Flow
      type: oauth2
      flows:
        implicit:
          authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
          scopes:
            user_impersonation: impersonate your user account
  schemas:
    Artifact:
      allOf:
        - $ref: "#/components/schemas/AzureResourceBase"
      description: Represents a Blueprint artifact.
      discriminator:
        propertyName: kind
      properties:
        kind:
          description: Specifies the kind of Blueprint artifact.
          enum:
            - template
            - roleAssignment
            - policyAssignment
          type: string
          x-ms-enum:
            modelAsString: true
            name: ArtifactKind
      required:
        - kind
      type: object
    ArtifactList:
      description: List of Blueprint artifacts
      properties:
        nextLink:
          description: Link to the next page of results.
          readOnly: true
          type: string
        value:
          description: List of Blueprint artifacts.
          items:
            $ref: "#/components/schemas/Artifact"
          type: array
      type: object
    ArtifactPropertiesBase:
      description: Common properties shared by different artifacts.
      properties:
        dependsOn:
          description: Artifacts which need to be deployed before the specified artifact.
          items:
            description: ID of peer artifact.
            type: string
          type: array
      type: object
      x-ms-external: true
    AzureResourceBase:
      description: Common properties for all Azure resources.
      properties:
        id:
          description: String Id used to locate any resource on Azure.
          readOnly: true
          type: string
        name:
          description: Name of this resource.
          readOnly: true
          type: string
        type:
          description: Type of this resource.
          readOnly: true
          type: string
      type: object
      x-ms-azure-resource: true
    Blueprint:
      allOf:
        - $ref: "#/components/schemas/AzureResourceBase"
      description: Represents a Blueprint definition.
      properties:
        properties:
          $ref: "#/components/schemas/BlueprintProperties"
      required:
        - properties
      type: object
    BlueprintList:
      description: List of Blueprint definitions.
      properties:
        nextLink:
          description: Link to the next page of results.
          readOnly: true
          type: string
        value:
          description: List of Blueprint definitions.
          items:
            $ref: "#/components/schemas/Blueprint"
          type: array
      title: BlueprintList
      type: object
    BlueprintProperties:
      allOf:
        - $ref: "#/components/schemas/SharedBlueprintProperties"
      description: Schema for Blueprint properties.
      properties:
        layout:
          description: Layout view of the blueprint, for UI reference.
          type: object
        versions:
          description: Published versions of this blueprint.
          type: object
      required:
        - targetScope
      type: object
      x-ms-external: true
    BlueprintResourcePropertiesBase:
      description: Shared properties between all Blueprint resources.
      properties:
        description:
          description: Multi-line explain this resource.
          maxLength: 500
          type: string
        displayName:
          description: One-liner string explain this resource.
          maxLength: 256
          type: string
      type: object
      x-ms-external: true
    BlueprintResourceStatusBase:
      description: Shared status properties between all Blueprint resources.
      properties:
        lastModified:
          description: Last modified time of this blueprint.
          readOnly: true
          type: string
        timeCreated:
          description: Creation time of this blueprint.
          readOnly: true
          type: string
      type: object
    BlueprintStatus:
      allOf:
        - $ref: "#/components/schemas/BlueprintResourceStatusBase"
      description: The status of the blueprint. This field is readonly.
      properties: {}
      type: object
    ParameterDefinition:
      description: Represent a parameter with constrains and metadata.
      properties:
        allowedValues:
          description: Array of allowed values for this parameter.
          items:
            description: Allowed value.
          type: array
        defaultValue:
          description: Default Value for this parameter.
        metadata:
          $ref: "#/components/schemas/ParameterDefinitionMetadata"
        type:
          description: Allowed data types for Azure Resource Manager template parameters.
          enum:
            - string
            - array
            - bool
            - int
            - object
            - secureObject
            - secureString
          type: string
          x-ms-enum:
            modelAsString: true
            name: TemplateParameterType
      required:
        - type
      type: object
    ParameterDefinitionCollection:
      additionalProperties:
        $ref: "#/components/schemas/ParameterDefinition"
      description: A dictionary hold parameter name and it's metadata.
      properties: {}
      type: object
    ParameterDefinitionMetadata:
      description: User-friendly properties for this parameter.
      properties:
        description:
          description: Description of this parameter/resourceGroup.
          maxLength: 500
          type: string
        displayName:
          description: DisplayName of this parameter/resourceGroup.
          maxLength: 256
          type: string
        strongType:
          description: StrongType for UI to render rich experience during assignment time.
          maxLength: 64
          type: string
      type: object
    ParameterValue:
      allOf:
        - $ref: "#/components/schemas/ParameterValueBase"
      description: Value for the specified parameter.
      properties:
        value:
          description: actual value.
      required:
        - value
      type: object
    ParameterValueBase:
      description: Base class for ParameterValue.
      properties:
        description:
          description: Optional property, just to establish ParameterValueBase as a
            BaseClass.
          type: string
      type: object
    ParameterValueCollection:
      additionalProperties:
        $ref: "#/components/schemas/ParameterValueBase"
      description: A dictionary for parameters and their corresponding values.
      properties: {}
      type: object
    PolicyAssignmentArtifact:
      allOf:
        - $ref: "#/components/schemas/Artifact"
      description: Blueprint artifact applies Policy assignments.
      properties:
        properties:
          $ref: "#/components/schemas/PolicyAssignmentArtifactProperties"
      required:
        - properties
      type: object
      x-ms-discriminator-value: policyAssignment
    PolicyAssignmentArtifactProperties:
      allOf:
        - $ref: "#/components/schemas/BlueprintResourcePropertiesBase"
        - $ref: "#/components/schemas/ArtifactPropertiesBase"
      description: PolicyAssignment properties
      properties:
        parameters:
          $ref: "#/components/schemas/ParameterValueCollection"
        policyDefinitionId:
          description: Azure resource ID of the policy definition.
          type: string
        resourceGroup:
          description: Name of the resource group placeholder to which the policy will be
            assigned.
          type: string
      required:
        - policyDefinitionId
        - parameters
      type: object
    PublishedBlueprint:
      allOf:
        - $ref: "#/components/schemas/AzureResourceBase"
      description: Represents a published Blueprint.
      properties:
        properties:
          $ref: "#/components/schemas/PublishedBlueprintProperties"
      required:
        - properties
      type: object
    PublishedBlueprintList:
      description: List of published Blueprints
      properties:
        nextLink:
          description: Link to the next page of results.
          readOnly: true
          type: string
        value:
          description: List of published Blueprints.
          items:
            $ref: "#/components/schemas/PublishedBlueprint"
          type: array
      title: BlueprintList
      type: object
    PublishedBlueprintProperties:
      allOf:
        - $ref: "#/components/schemas/SharedBlueprintProperties"
      description: Schema for published Blueprint properties.
      properties:
        blueprintName:
          description: Name of the Blueprint definition.
          type: string
        changeNotes:
          description: Version-specific change notes
          maxLength: 500
          type: string
      type: object
      x-ms-external: true
    ResourceGroupDefinition:
      description: Represents an Azure resource group in a Blueprint definition.
      properties:
        dependsOn:
          description: Artifacts which need to be deployed before this resource group.
          items:
            description: Name of peer artifact.
            type: string
          type: array
        location:
          description: Location of this resourceGroup, leave empty if the resource group
            location will be specified during the Blueprint assignment.
          maxLength: 90
          type: string
        metadata:
          $ref: "#/components/schemas/ParameterDefinitionMetadata"
        name:
          description: Name of this resourceGroup, leave empty if the resource group name
            will be specified during the Blueprint assignment.
          maxLength: 90
          minLength: 1
          type: string
      type: object
    ResourceGroupDefinitionCollection:
      additionalProperties:
        $ref: "#/components/schemas/ResourceGroupDefinition"
      description: A dictionary which maps resource group placeholders to the resource
        groups which will be created.
      properties: {}
      type: object
    ResourceGroupValue:
      description: Represents an Azure resource group.
      properties:
        location:
          description: Location of the resource group
          type: string
        name:
          description: Name of the resource group
          maxLength: 90
          minLength: 1
          type: string
      type: object
    ResourceGroupValueCollection:
      additionalProperties:
        $ref: "#/components/schemas/ResourceGroupValue"
      description: A dictionary which maps resource group placeholders to the resource
        groups which will be created.
      properties: {}
      type: object
    ResourceProviderOperation:
      description: Supported operation of this resource provider.
      properties:
        display:
          description: Display metadata associated with the operation.
          properties:
            description:
              description: Description of this operation.
              type: string
            operation:
              description: "Type of operation: get, read, delete, etc."
              type: string
            provider:
              description: "Resource provider: Microsoft Blueprint."
              type: string
            resource:
              description: Resource on which the operation is performed.
              type: string
        name:
          description: Operation name, in format of {provider}/{resource}/{operation}
          type: string
      readOnly: true
    ResourceProviderOperationList:
      description: Result of the request to list operations.
      properties:
        value:
          description: List of operations supported by this resource provider.
          items:
            $ref: "#/components/schemas/ResourceProviderOperation"
          type: array
      readOnly: true
    RoleAssignmentArtifact:
      allOf:
        - $ref: "#/components/schemas/Artifact"
      description: Blueprint artifact applies Azure role assignment.
      properties:
        properties:
          $ref: "#/components/schemas/RoleAssignmentArtifactProperties"
      required:
        - properties
      type: object
      x-ms-discriminator-value: roleAssignment
    RoleAssignmentArtifactProperties:
      allOf:
        - $ref: "#/components/schemas/BlueprintResourcePropertiesBase"
        - $ref: "#/components/schemas/ArtifactPropertiesBase"
      description: Properties of the Role assignment artifact.
      properties:
        principalIds:
          description: Array of user or group identities in Azure Active Directory. The
            roleDefinition will apply to these identity.
        resourceGroup:
          description: RoleAssignment will be scope to this resourceGroup, if left empty,
            it would scope to the subscription.
          type: string
        roleDefinitionId:
          description: Azure resource ID of the RoleDefinition.
          type: string
      required:
        - roleDefinitionId
        - principalIds
      type: object
    SecretReferenceParameterValue:
      allOf:
        - $ref: "#/components/schemas/ParameterValueBase"
      description: The reference to a secret, if the parameter should be protected.
      properties:
        reference:
          $ref: "#/components/schemas/SecretValueReference"
      required:
        - reference
      type: object
    SecretValueReference:
      description: Reference to a KeyVault secret.
      properties:
        keyVault:
          $ref: "#/components/schemas/keyVaultReference"
        secretName:
          description: Name of the secret.
          type: string
        secretVersion:
          description: Version of the secret, (if there are multiple versions)
          type: string
      required:
        - keyVault
        - secretName
      type: object
    SharedBlueprintProperties:
      allOf:
        - $ref: "#/components/schemas/BlueprintResourcePropertiesBase"
      description: Shared Schema for both blueprintProperties and
        publishedBlueprintProperties.
      properties:
        parameters:
          $ref: "#/components/schemas/ParameterDefinitionCollection"
        resourceGroups:
          $ref: "#/components/schemas/ResourceGroupDefinitionCollection"
        status:
          $ref: "#/components/schemas/BlueprintStatus"
        targetScope:
          description: The scope where this Blueprint can be applied.
          enum:
            - subscription
            - managementGroup
          type: string
          x-ms-enum:
            modelAsString: true
            name: BlueprintTargetScope
      type: object
      x-ms-external: true
    TemplateArtifact:
      allOf:
        - $ref: "#/components/schemas/Artifact"
      description: Blueprint artifact deploys Azure resource manager template.
      properties:
        properties:
          $ref: "#/components/schemas/TemplateArtifactProperties"
      required:
        - properties
      type: object
      x-ms-discriminator-value: template
    TemplateArtifactProperties:
      allOf:
        - $ref: "#/components/schemas/BlueprintResourcePropertiesBase"
        - $ref: "#/components/schemas/ArtifactPropertiesBase"
      description: Properties of a Template Artifact.
      properties:
        parameters:
          $ref: "#/components/schemas/ParameterValueCollection"
        resourceGroup:
          description: If applicable, the name of the resource group placeholder to which
            the template will be deployed.
          type: string
        template:
          description: The Azure Resource Manager template body.
          type: object
      required:
        - template
        - parameters
      type: object
    keyVaultReference:
      description: Specifies the link to a KeyVault.
      properties:
        id:
          description: Azure resource ID of the KeyVault.
          type: string
      required:
        - id
      type: object
