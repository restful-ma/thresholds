openapi: 3.0.0
info:
  description: The Admin Storage Management Client.
  title: StorageManagementClient
  version: 2015-12-01-preview
  x-apisguru-categories:
    - cloud
  x-logo:
    url: https://assets.onestore.ms/cdnfiles/onestorerolling-1606-01000/shell/v3/images/logo/microsoft.png
  x-origin:
    - format: swagger
      url: https://raw.githubusercontent.com/Azure/azure-rest-api-specs/master/specification/azsadmin/resource-manager/storage/Microsoft.Storage.Admin/preview/2015-12-01/containers.json
      version: "2.0"
  x-providerName: azure.com
  x-serviceName: azsadmin-containers
  x-tags:
    - Azure
    - Microsoft
security:
  - azure_auth:
      - user_impersonation
paths:
  "/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Storage.Admin/farms/{farmId}/shares/operationresults/{operationId}":
    get:
      description: Returns the status of a container migration job.
      operationId: Containers_MigrationStatus
      parameters:
        - description: Subscription Id.
          in: path
          name: subscriptionId
          required: true
          schema:
            type: string
          examples:
            Returns the status of a container migration job.:
              value: 9ad61516-995c-4873-a21f-7e44904f0ed2
        - description: Resource group name.
          in: path
          name: resourceGroupName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Returns the status of a container migration job.:
              value: System.local
        - description: Farm Id.
          in: path
          name: farmId
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Returns the status of a container migration job.:
              value: 3cf03497-c44a-4e51-a56f-3987d88c70af
        - description: Operation Id.
          in: path
          name: operationId
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Returns the status of a container migration job.:
              value: 3ada6328-89ae-4263-8bfd-b76504a2bf66
        - description: REST Api Version.
          in: query
          name: api-version
          required: true
          schema:
            type: string
          examples:
            Returns the status of a container migration job.:
              value: 2015-12-01-preview
      responses:
        "200":
          description: OK -- Operation has been accepted and processed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MigrationResult"
              examples:
                Returns the status of a container migration job.:
                  $ref: "#/components/examples/Returns_the_status_of_a_container_mi\
                    gration_job."
      tags:
        - Containers
    post:
      description: Cancel a container migration job.
      operationId: Containers_CancelMigration
      parameters:
        - description: Subscription Id.
          in: path
          name: subscriptionId
          required: true
          schema:
            type: string
          examples:
            Cancel a container migration job.:
              value: 9ad61516-995c-4873-a21f-7e44904f0ed2
        - description: Resource group name.
          in: path
          name: resourceGroupName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Cancel a container migration job.:
              value: System.local
        - description: Farm Id.
          in: path
          name: farmId
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Cancel a container migration job.:
              value: 3cf03497-c44a-4e51-a56f-3987d88c70af
        - description: Operation Id.
          in: path
          name: operationId
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Cancel a container migration job.:
              value: 3ada6328-89ae-4263-8bfd-b76504a2bf66
        - description: REST Api Version.
          in: query
          name: api-version
          required: true
          schema:
            type: string
          examples:
            Cancel a container migration job.:
              value: 2015-12-01-preview
      responses:
        "200":
          description: OK -- Operation has been accepted and processed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MigrationResult"
              examples:
                Cancel a container migration job.:
                  $ref: "#/components/examples/Cancel_a_container_migration_job."
        "202":
          description: ACCEPTED - Operation has been accepted will be processed
            asynchronously
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MigrationResult"
              examples:
                Cancel a container migration job.:
                  $ref: "#/components/examples/Cancel_a_container_migration_job."
      tags:
        - Containers
      x-ms-long-running-operation: true
  "/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Storage.Admin/farms/{farmId}/shares/{shareName}/containers":
    get:
      description: Returns the list of containers which can be migrated in the specified
        share.
      operationId: Containers_List
      parameters:
        - description: Subscription Id.
          in: path
          name: subscriptionId
          required: true
          schema:
            type: string
          examples:
            Returns the list of containers which can be migrated in the specified share.:
              value: 9ad61516-995c-4873-a21f-7e44904f0ed2
        - description: Resource group name.
          in: path
          name: resourceGroupName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Returns the list of containers which can be migrated in the specified share.:
              value: System.local
        - description: Farm Id.
          in: path
          name: farmId
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Returns the list of containers which can be migrated in the specified share.:
              value: 3cf03497-c44a-4e51-a56f-3987d88c70af
        - description: Share name.
          in: path
          name: shareName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Returns the list of containers which can be migrated in the specified share.:
              value: "||SU1FileServer.azurestack.local|SU1_ObjStore"
        - description: REST Api Version.
          in: query
          name: api-version
          required: true
          schema:
            type: string
          examples:
            Returns the list of containers which can be migrated in the specified share.:
              value: 2015-12-01-preview
        - $ref: "#/components/parameters/MigrationIntentParameter"
        - $ref: "#/components/parameters/MaxCountParameter"
        - $ref: "#/components/parameters/StartIndexParameter"
      responses:
        "200":
          description: OK -- The list of containers has been returned.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ContainerList"
              examples:
                Returns the list of containers which can be migrated in the specified share.:
                  $ref: "#/components/examples/Returns_the_list_of_containers_which\
                    _can_be_migrated_in_the_specified_share."
        "404":
          description: NOT FOUND -- The specified farm or share was not found.
      tags:
        - Containers
  "/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Storage.Admin/farms/{farmId}/shares/{shareName}/destinationshares":
    get:
      description: Returns a list of destination shares that the system considers as best
        candidates for migration.
      operationId: Containers_ListDestinationShares
      parameters:
        - description: Subscription Id.
          in: path
          name: subscriptionId
          required: true
          schema:
            type: string
          examples:
            Returns a list of destination shares that the system considers as best candidates for migration.:
              value: 9ad61516-995c-4873-a21f-7e44904f0ed2
        - description: Resource group name.
          in: path
          name: resourceGroupName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Returns a list of destination shares that the system considers as best candidates for migration.:
              value: System.local
        - description: Farm Id.
          in: path
          name: farmId
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Returns a list of destination shares that the system considers as best candidates for migration.:
              value: 3cf03497-c44a-4e51-a56f-3987d88c70af
        - description: Share name.
          in: path
          name: shareName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Returns a list of destination shares that the system considers as best candidates for migration.:
              value: "||SU1FileServer.azurestack.local|SU1_ObjStore"
        - description: REST Api Version.
          in: query
          name: api-version
          required: true
          schema:
            type: string
          examples:
            Returns a list of destination shares that the system considers as best candidates for migration.:
              value: 2015-12-01-preview
      responses:
        "200":
          description: OK -- The list of shares has been returned.
          content:
            application/json:
              schema:
                description: List of storage shares.
                items:
                  allOf:
                    - description: Base resource object.
                      properties:
                        id:
                          description: Resource ID.
                          type: string
                        location:
                          description: Resource location.
                          type: string
                        name:
                          description: Resource Name.
                          type: string
                        tags:
                          additionalProperties:
                            type: string
                          description: Resource tags.
                          type: object
                        type:
                          description: Resource type.
                          type: string
                      type: object
                      x-ms-azure-resource: true
                  description: Storage share.
                  properties:
                    properties:
                      description: Storage share properties.
                      properties:
                        freeCapacity:
                          description: The free space of the storage share in bytes.
                          format: int64
                          readOnly: true
                          type: integer
                        healthStatus:
                          description: Current health status.
                          enum:
                            - Unknown
                            - Healthy
                            - Warning
                            - Critical
                          readOnly: true
                          type: string
                          x-ms-enum:
                            modelAsString: true
                            name: HealthStatus
                        shareName:
                          description: The name of the storage share.
                          readOnly: true
                          type: string
                        totalCapacity:
                          description: The total capacity of the storage share in bytes.
                          format: int64
                          readOnly: true
                          type: integer
                        uncPath:
                          description: The UNC path to the storage share.
                          readOnly: true
                          type: string
                        usedCapacity:
                          description: The used capacity of the storage share in bytes.
                          format: int64
                          readOnly: true
                          type: integer
                      type: object
                  type: object
                type: array
              examples:
                Returns a list of destination shares that the system considers as best candidates for migration.:
                  $ref: "#/components/examples/Returns_a_list_of_destination_shares\
                    _that_the_system_considers_as_best_candidates_for_migration\
                    ."
        "404":
          description: NOT FOUND -- The specified farm or share was not found.
      tags:
        - Containers
      x-ms-pageable: {}
  "/subscriptions/{subscriptionId}/resourcegroups/{resourceGroupName}/providers/Microsoft.Storage.Admin/farms/{farmId}/shares/{shareName}/migrate":
    post:
      description: Starts a container migration job to migrate containers to the specified
        destination share.
      operationId: Containers_Migrate
      parameters:
        - description: Subscription Id.
          in: path
          name: subscriptionId
          required: true
          schema:
            type: string
          examples:
            Starts a container migration job to migrate containers to the specified destination share.:
              value: 9ad61516-995c-4873-a21f-7e44904f0ed2
        - description: Resource group name.
          in: path
          name: resourceGroupName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Starts a container migration job to migrate containers to the specified destination share.:
              value: System.local
        - description: Farm Id.
          in: path
          name: farmId
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Starts a container migration job to migrate containers to the specified destination share.:
              value: 3cf03497-c44a-4e51-a56f-3987d88c70af
        - description: Share name.
          in: path
          name: shareName
          required: true
          x-ms-parameter-location: method
          schema:
            type: string
          examples:
            Starts a container migration job to migrate containers to the specified destination share.:
              value: "||SU1FileServer.azurestack.local|SU1_ObjStore"
        - description: REST Api Version.
          in: query
          name: api-version
          required: true
          schema:
            type: string
          examples:
            Starts a container migration job to migrate containers to the specified destination share.:
              value: 2015-12-01-preview
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MigrationParameters"
        description: The parameters of container migration job.
        required: true
        x-ms-parameter-location: method
      responses:
        "200":
          description: OK -- Container has been migrated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MigrationResult"
              examples:
                Starts a container migration job to migrate containers to the specified destination share.:
                  $ref: "#/components/examples/Starts_a_container_migration_job_to_\
                    migrate_containers_to_the_specified_destination_share."
        "202":
          description: ACCEPTED -- Operation accepted and will be performed asynchronously
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MigrationResult"
              examples:
                Starts a container migration job to migrate containers to the specified destination share.:
                  $ref: "#/components/examples/Starts_a_container_migration_job_to_\
                    migrate_containers_to_the_specified_destination_share."
      tags:
        - Containers
      x-ms-long-running-operation: true
servers:
  - url: https://adminmanagement.local.azurestack.external
components:
  examples:
    Returns_the_status_of_a_container_migration_job.:
      value:
        containerName: ContainerName1
        destinationShareName: \192.168.1.1
        failureReason: ""
        jobId: 3ada6328-89ae-4263-8bfd-b76504a2bf66
        migrationStatus: Active
        sourceShareName: "||SU1FileServer.azurestack.local|SU1_ObjStore"
        storageAccountName: StorageAccountName1
        subEntitiesCompleted: 165
        subEntitiesFailed: 5
    Cancel_a_container_migration_job.:
      value:
        containerName: ContainerName1
        destinationShareName: \\192.168.1.1\DestinationShare
        failureReason: ""
        jobId: 3ada6328-89ae-4263-8bfd-b76504a2bf66
        migrationStatus: Rollback
        sourceShareName: "||SU1FileServer.azurestack.local|SU1_ObjStore"
        storageAccountName: StorageAccountName1
        subEntitiesCompleted: 165
        subEntitiesFailed: 5
    Returns_the_list_of_containers_which_can_be_migrated_in_the_specified_share.:
      value:
        - accountid: 3fe86317cc0d40e0a0d4833641a64fdb
          accountname: srphealthaccount
          containerState: Active
          containerid: 22
          containername: azurestackhealthrestrequestprocessed
          sharename: \\\\SU1FileServer.azurestack.local\\SU1_ObjStore
          usedBytesInPrimaryVolume: 2551603200
        - accountid: 3fe86317cc0d40e0a0d4833641a64fdb
          accountname: srphealthaccount
          containerState: Active
          containerid: 23
          containername: azurestackhealthrestrequestaccept
          sharename: \\\\SU1FileServer.azurestack.local\\SU1_ObjStore
          usedBytesInPrimaryVolume: 2282553344
        - accountid: 0a6b4f6b1de14cc08aa1fefadcc481eb
          accountname: frphealthaccount
          containerState: Active
          containerid: 6
          containername: azurestackhealthazssecurity
          sharename: \\\\SU1FileServer.azurestack.local\\SU1_ObjStore
          usedBytesInPrimaryVolume: 880074752
        - accountid: 3fe86317cc0d40e0a0d4833641a64fdb
          accountname: srphealthaccount
          containerState: Active
          containerid: 30
          containername: azurestackhealthtsqueueresponse
          sharename: \\\\SU1FileServer.azurestack.local\\SU1_ObjStore
          usedBytesInPrimaryVolume: 560037888
        - accountid: 3fe86317cc0d40e0a0d4833641a64fdb
          accountname: srphealthaccount
          containerState: Active
          containerid: 26
          containername: azurestackhealthtsqueuerequest
          sharename: \\\\SU1FileServer.azurestack.local\\SU1_ObjStore
          usedBytesInPrimaryVolume: 541351936
        - accountid: c2a6bdd19e404154afe27e2637e64ee1
          accountname: hrphealthaccount
          containerState: Active
          containerid: 37
          containername: azurestackhealthcentralmaeventtable
          sharename: \\\\SU1FileServer.azurestack.local\\SU1_ObjStore
          usedBytesInPrimaryVolume: 456925184
        - accountid: 3fe86317cc0d40e0a0d4833641a64fdb
          accountname: srphealthaccount
          containerState: Active
          containerid: 17
          containername: azurestackhealthblobsvcrpcverbose
          sharename: \\\\SU1FileServer.azurestack.local\\SU1_ObjStore
          usedBytesInPrimaryVolume: 343273472
        - accountid: 0a6b4f6b1de14cc08aa1fefadcc481eb
          accountname: frphealthaccount
          containerState: Active
          containerid: 7
          containername: azurestackhealthsystemperfcounter60s
          sharename: \\\\SU1FileServer.azurestack.local\\SU1_ObjStore
          usedBytesInPrimaryVolume: 208580608
        - accountid: 3fe86317cc0d40e0a0d4833641a64fdb
          accountname: srphealthaccount
          containerState: Active
          containerid: 31
          containername: azurestackhealthtstableresponse
          sharename: \\\\SU1FileServer.azurestack.local\\SU1_ObjStore
          usedBytesInPrimaryVolume: 86974464
        - accountid: 3fe86317cc0d40e0a0d4833641a64fdb
          accountname: srphealthaccount
          containerState: Active
          containerid: 28
          containername: azurestackhealthtstablerequest
          sharename: \\\\SU1FileServer.azurestack.local\\SU1_ObjStore
          usedBytesInPrimaryVolume: 85082112
    Returns_a_list_of_destination_shares_that_the_system_considers_as_best_candidates_for_migration.:
      value: []
    Starts_a_container_migration_job_to_migrate_containers_to_the_specified_destination_share.:
      value:
        containerName: ContainerName1
        destinationShareName: \\192.168.1.1\DestinationShare
        failureReason: ""
        jobId: 3ada6328-89ae-4263-8bfd-b76504a2bf66
        migrationStatus: Active
        sourceShareName: "||SU1FileServer.azurestack.local|SU1_ObjStore"
        storageAccountName: StorageAccountName1
        subEntitiesCompleted: 165
        subEntitiesFailed: 5
  parameters:
    MaxCountParameter:
      description: The maximum number of containers.
      in: query
      name: MaxCount
      required: false
      x-ms-parameter-location: method
      schema:
        type: integer
        format: int32
      examples:
        Returns the list of containers which can be migrated in the specified share.:
          value: 1000
    MigrationIntentParameter:
      description: The container migration intent.
      in: query
      name: Intent
      required: true
      x-ms-parameter-location: method
      schema:
        type: string
      examples:
        Returns the list of containers which can be migrated in the specified share.:
          value: Migration
    StartIndexParameter:
      description: The starting index the resource provider uses.
      in: query
      name: StartIndex
      required: false
      x-ms-parameter-location: method
      schema:
        type: integer
        format: int32
      examples:
        Returns the list of containers which can be migrated in the specified share.:
          value: 0
  securitySchemes:
    azure_auth:
      description: Authorization uses an Azure Active Directory OAuth2 flow.
      type: oauth2
      flows:
        implicit:
          authorizationUrl: https://login.microsoftonline.com/common/oauth2/authorize
          scopes:
            user_impersonation: impersonate your user account
  schemas:
    Container:
      description: Container properties.
      properties:
        accountid:
          description: The ID of the storage account.
          readOnly: true
          type: string
        accountname:
          description: The name of storage account where the container locates.
          readOnly: true
          type: string
        containerState:
          description: The current state of the container.
          readOnly: true
          type: string
        containerid:
          description: The container ID.
          format: int64
          readOnly: true
          type: integer
        containername:
          description: Container name.
          readOnly: true
          type: string
        sharename:
          description: The name of the share where the container locates.
          readOnly: true
          type: string
        usedBytesInPrimaryVolume:
          description: The used space, in bytes, of the container in the primary volume.
          format: int64
          readOnly: true
          type: integer
      type: object
    ContainerList:
      description: List of containers.
      items:
        $ref: "#/components/schemas/Container"
      type: array
    MigrationParameters:
      description: Parameters of container migration job.
      properties:
        containerName:
          description: The name of the container to be migrated.
          type: string
        destinationShareUncPath:
          description: The UNC path of the destination share for migration.
          type: string
        storageAccountName:
          description: The name of the storage account where the container locates.
          type: string
      required:
        - storageAccountName
        - containerName
        - destinationShareUncPath
      type: object
    MigrationResult:
      description: The result of the container migration.
      properties:
        containerName:
          description: The name of the container to be migrated.
          readOnly: true
          type: string
        destinationShareName:
          description: The name of the destination storage share.
          readOnly: true
          type: string
        failureReason:
          description: The migration failure reason.
          readOnly: true
          type: string
        jobId:
          description: The migration job ID.
          readOnly: true
          type: string
        migrationStatus:
          $ref: "#/components/schemas/MigrationState"
        sourceShareName:
          description: The name of the source storage share.
          readOnly: true
          type: string
        storageAccountName:
          description: The storage account name.
          readOnly: true
          type: string
        subEntitiesCompleted:
          description: The number of entities which have been migrated.
          format: int64
          readOnly: true
          type: integer
        subEntitiesFailed:
          description: The number of entities which failed in migration.
          format: int64
          readOnly: true
          type: integer
      type: object
    MigrationState:
      enum:
        - Active
        - Paused
        - Deleted
        - Rollback
        - Complete
        - Canceled
        - Failed
        - All
      type: string
      x-ms-enum:
        modelAsString: true
        name: MigrationState
